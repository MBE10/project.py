<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Cineverse — Home</title>
  <link rel="stylesheet" href="/static/css/style.css"/>
  <style>
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; padding: 28px; background:#f7f8fb; color:#111 }
    header { display:flex; justify-content:space-between; align-items:center; margin-bottom:18px }
    .card { background:#fff; padding:18px; border-radius:12px; box-shadow: 0 6px 18px rgba(2,6,23,0.06); margin-bottom:12px }
    .small { font-size:13px; color:#666 }
    .btn { padding:8px 12px; border-radius:8px; border:none; cursor:pointer; background:#001933; color:#fff }
    form.inline { display:inline }
  </style>
</head>
<body>
  <header>
    <div>
      <h2 style="margin:0">Cineverse</h2>
      <div class="small">Welcome{% if current_user %}, {{ current_user }}{% endif %}</div>
    </div>

    <div>
      <form class="inline" action="/logout" method="post" style="display:inline;">
        <button class="btn" type="submit">Logout</button>
      </form>
    </div>
  </header>

  <section class="card">
    <h3 style="margin-top:0">Add Movie / Show</h3>
    <form action="/movies/create" method="post">
      <input name="title" placeholder="Title" required style="width:60%; padding:8px; border-radius:8px; border:1px solid #ddd" />
      <select name="type" style="padding:8px; border-radius:8px; border:1px solid #ddd">
        <option value="movie">Movie</option>
        <option value="show">Show</option>
      </select>
      <input name="year" placeholder="Year" style="width:80px; padding:8px; border-radius:8px; border:1px solid #ddd" />
      <button class="btn" type="submit">Add</button>
    </form>
  </section>

  <section class="card">
    <h3 style="margin-top:0">Movies & Shows</h3>
    <ul>
      {% for m in movies %}
        <li>
          <strong>{{ m.title }}</strong> <span class="small">({{ m.type }}{% if m.year %}, {{ m.year }}{% endif %})</span>
          <form style="display:inline" action="/movies/{{ m.id }}/delete" method="post"><button style="margin-left:8px" class="small">delete</button></form>
        </li>
      {% else %}
        <li class="small">No movies yet — add one.</li>
      {% endfor %}
    </ul>
  </section>

  <section class="card">
    <h3 style="margin-top:0">Add Author & Book</h3>

    <form action="/authors/create" method="post" style="margin-bottom:10px;">
      <input name="name" placeholder="Author name" required style="padding:8px; border-radius:8px; border:1px solid #ddd" />
      <button class="btn" type="submit">Add Author</button>
    </form>

    <form action="/books/create" method="post">
      <input name="title" placeholder="Book title" required style="padding:8px; border-radius:8px; border:1px solid #ddd" />
      <input name="author_name" placeholder="Author name (existing or new)" required style="padding:8px; border-radius:8px; border:1px solid #ddd" />
      <button class="btn" type="submit">Add Book</button>
    </form>
  </section>

  <section class="card">
    <h3 style="margin-top:0">Books</h3>
    <ul>
      {% for b in books %}
        <li>{{ b.title }} — {{ b.author.name if b.author else "—" }}
          <form style="display:inline" action="/books/{{ b.id }}/delete" method="post"><button style="margin-left:8px" class="small">delete</button></form>
        </li>
      {% else %}
        <li class="small">No books yet — add one.</li>
      {% endfor %}
    </ul>
  </section>
</body>
</html>
